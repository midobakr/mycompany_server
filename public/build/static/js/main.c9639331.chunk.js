(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),s=n.n(r),c=n(31),o=n.n(c),i=n(8),l=n(28),d=n(4),u=n(70),j=n(3),b="SET_TOKEN",h="LOG_IN",p="REMOVE_TOKEN",O="GET_DATA",x="SET_USER",m="SET_ATTENDANCE",g="SHOW_BACKDROP",f="HIDE_BACKDROP",v="SET_ERRORS",y="SET_HISTORY",_="SET_CONVERSATION",w="SET_NOTIFICATION",k="SET_ALL_USERS",A="SET_MY_USER",N="SET_REGISTEREDUSERS",S="SET_MYINBOX",I="SET_MYCHAT",E=n(9),U=n.n(E),D=n(15),C=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),a=new Uint8Array(n.length),r=0;r<n.length;++r)a[r]=n.charCodeAt(r);return a},M=function(){var e=Object(D.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"serviceWorker"in navigator&&navigator.serviceWorker.register("/serverWorker.js",{scope:"/"}).then(Object(D.a)(U.a.mark((function e(){var t,n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.ready;case 2:return t=e.sent,e.next=5,t.pushManager.getSubscription();case 5:if(null!==(n=e.sent)){e.next=10;break}return e.next=9,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:C("BGoYWF08O9yIeCH8ZB6jymtlhq54Wk8Lvit8i-UsMhJlh1el0UYiK0FsCTpQlM8wQ2G5ttLDzVNkByNZWtw-G4I")});case 9:n=e.sent;case 10:fetch("http://192.168.1.6:3333/subscription",{method:"POST",headers:{Authorization:localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(){console.log("done")}));case 11:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(D.a)(U.a.mark((function e(){var t,n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serviceWorker"in navigator)){e.next=9;break}return e.next=3,navigator.serviceWorker.ready;case 3:return t=e.sent,e.next=6,t.pushManager.getSubscription();case 6:return n=e.sent,e.next=9,fetch("http://192.168.1.6:3333/subscription",{method:"DELETE",headers:{Authorization:localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(){console.log("done")}));case 9:localStorage.removeItem("token");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T={user:{},logIn:!1,token:"",backdrop:!1,loading:!1,errors:"",Attendance:null,history:[],conversation:{},notification:[],allUsers:[],myUserInfo:"",registeredUsers:[],myInbox:[],myChat:""};var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return localStorage.setItem("token",t.payload),M(),Object(j.a)(Object(j.a)({},e),{},{token:t.payload});case b:return localStorage.setItem("token",t.payload),Object(j.a)(Object(j.a)({},e),{},{token:t.payload});case p:return R(),Object(j.a)(Object(j.a)({},e),{},{token:"",user:{}});case O:return Object(j.a)(Object(j.a)({},e),{},{backdrop:!0,loading:!0,errors:""});case v:return"invalid token"===t.payload.msg?(localStorage.removeItem("token"),Object(j.a)(Object(j.a)({},e),{},{loading:!1,errors:t.payload,token:""})):Object(j.a)(Object(j.a)({},e),{},{loading:!1,errors:t.payload});case x:return console.log("SET_USER",t.payload),Object(j.a)(Object(j.a)({},e),{},{user:t.payload,backdrop:!1,loading:!1});case g:return Object(j.a)(Object(j.a)({},e),{},{backdrop:!0});case f:return Object(j.a)(Object(j.a)({},e),{},{backdrop:!1});case m:return Object(j.a)(Object(j.a)({},e),{},{Attendance:t.payload,backdrop:!1,loading:!1});case y:return Object(j.a)(Object(j.a)({},e),{},{history:t.payload,backdrop:!1,loading:!1});case _:return Object(j.a)(Object(j.a)({},e),{},{conversation:t.payload,backdrop:!1,loading:!1});case w:return Object(j.a)(Object(j.a)({},e),{},{notification:t.payload,backdrop:!1,loading:!1});case k:return Object(j.a)(Object(j.a)({},e),{},{allUsers:t.payload,backdrop:!1,loading:!1});case A:return Object(j.a)(Object(j.a)({},e),{},{myUserInfo:t.payload,backdrop:!1,loading:!1});case N:return Object(j.a)(Object(j.a)({},e),{},{registeredUsers:t.payload,backdrop:!1,loading:!1});case S:return Object(j.a)(Object(j.a)({},e),{},{myInbox:t.payload,backdrop:!1,loading:!1});case I:return Object(j.a)(Object(j.a)({},e),{},{myChat:t.payload,backdrop:!1,loading:!1});default:return e}},H=n(16),B=n(17),F=n(19),P=n(18),J=n(7),z=n(41),W=n.n(z),Y=n(6),q=n(42),K=n.n(q),G=n(43),V=n.n(G);var Q=function(e){return Object(a.jsx)("li",{className:V.a.sidebar_item,onClick:function(){e.setActive(e.path)},style:e.theActiveItem===e.path?{backgroundColor:"red"}:{},children:Object(a.jsx)(i.b,{className:V.a.Link,to:e.path,children:e.name})})};var X=function(e){var t=e.username,n=e.avatar,s=Object(r.useState)(window.location.pathname),c=Object(Y.a)(s,2),o=c[0],i=c[1];return console.log("activeItem==>",o),Object(a.jsxs)("div",{className:K.a.container,children:[Object(a.jsxs)("div",{style:{textAlign:"center"},children:[Object(a.jsx)("img",{style:{borderRadius:"50%"},src:"https://www.gravatar.com/avatar/".concat(n),alt:"profile "}),Object(a.jsx)("h2",{style:{textAlign:"center"},children:t})]}),Object(a.jsxs)("ul",{className:K.a.sidebar_list,children:[Object(a.jsx)(Q,{name:"Home",path:"/",setActive:i,theActiveItem:o}),Object(a.jsx)(Q,{name:"All employees",path:"/dashboard/allEmployees",setActive:i,theActiveItem:o}),Object(a.jsx)(Q,{name:"Registered employees",path:"/dashboard/registeredUsers",setActive:i,theActiveItem:o}),Object(a.jsx)(Q,{name:"Absent employees",path:"/dashboard/AbsentEmployees",setActive:i,theActiveItem:o}),Object(a.jsx)(Q,{name:"recieved requests",path:"/dashboard/recievedRequests",setActive:i,theActiveItem:o}),Object(a.jsx)(Q,{name:"Send message",path:"/dashboard/sendMessage",setActive:i,theActiveItem:o})]})]})},Z=n(46),$=n.n(Z);var ee=function(e){var t=Object(d.c)();return Object(a.jsx)("nav",{className:$.a.nav,children:Object(a.jsxs)("ul",{className:$.a.nav_list,children:[Object(a.jsx)("li",{children:"profile"}),Object(a.jsx)("li",{onClick:function(){t({type:p})},children:Object(a.jsx)(i.b,{to:"/",children:" log out"})})]})})},te=function(e,t){return function(){var n=Object(D.a)(U.a.mark((function n(a,r){var s;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("i am here ==>",r().token),a({type:O}),console.log("state",r()),n.prev=3,n.next=6,fetch(e,{method:"GET",headers:{Authorization:r().token}});case 6:if(!(s=n.sent).ok){n.next=16;break}return console.log("raw data==>",s.ok),n.next=11,s.json();case 11:s=n.sent,console.log(s),a({type:t,payload:s}),n.next=20;break;case 16:return n.next=18,s.json();case 18:throw s=n.sent;case 20:n.next=26;break;case 22:n.prev=22,n.t0=n.catch(3),console.log("e======>",n.t0),a({type:v,payload:n.t0.errors[0]});case 26:case"end":return n.stop()}}),n,null,[[3,22]])})));return function(e,t){return n.apply(this,arguments)}}()},ne=n(47),ae=n.n(ne);var re=Object(d.b)((function(e){return{allUsers:e.allUsers}}),(function(e){return{getAllUsers:function(){return e(te("/dashboard/allEmployees",k))}}}))((function(e){var t=e.getAllUsers,n=e.allUsers;return Object(r.useEffect)((function(){t()}),[t]),Object(a.jsx)("div",{className:ae.a.dd,children:n.map((function(e){return Object(a.jsxs)(i.b,{to:"/dashboard/employee/".concat(e._id),className:ae.a.box,children:[Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",paddingRight:"10px"},children:e.name}),Object(a.jsx)("img",{style:{borderRadius:"50%"},src:"https://www.gravatar.com/avatar/".concat(e.avatar),alt:"ff"})]})}))})})),se=n(71),ce=n.n(se),oe=["sunday","monday","tuesday","wendthday","thrusday","friday","saturday"];var ie=function(e){return Object(a.jsxs)("table",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"date"}),Object(a.jsx)("th",{children:"time of leaving"}),Object(a.jsx)("th",{children:"time of arriving"}),Object(a.jsx)("th",{children:"day"})]}),e.history.map((function(e){var t=new Date(e.AttendAt),n=new Date(e.LeftAt);return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[Object(a.jsx)("span",{children:t.getFullYear()}),Object(a.jsxs)("span",{children:["/",t.getMonth()+1]}),Object(a.jsxs)("span",{children:["/",t.getDate()]})]}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{children:n.getHours()?n.getHours()>12?n.getHours()-12+":"+n.getMinutes()+" PM":n.getHours()+":"+n.getMinutes()+" AM":""})}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{children:t.getHours()>12?t.getHours()-12+":"+t.getMinutes()+"PM":t.getHours()+":"+t.getMinutes()+"AM"})}),Object(a.jsx)("td",{children:oe[t.getDay()]})]})}))]})},le=n(24),de=n.n(le),ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return function(){var a=Object(D.a)(U.a.mark((function a(r,s){var c,o;return U.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:O}),a.prev=1,a.next=4,fetch(e,{method:"POST",headers:{Authorization:s().token,"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if(!(c=a.sent).ok){a.next=13;break}return console.log("okkkkkkkkkkkkkkkk"),a.next=9,c.json();case 9:o=a.sent,r({type:n,payload:o}),a.next=17;break;case 13:return a.next=15,c.json();case 15:throw c=a.sent;case 17:a.next=22;break;case 19:a.prev=19,a.t0=a.catch(1),r({type:v,payload:a.t0.errors[0]});case 22:case"end":return a.stop()}}),a,null,[[1,19]])})));return function(e,t){return a.apply(this,arguments)}}()};var je=Object(d.b)((function(e){return{myChat:e.myChat,myID:e.user._id}}),(function(e){return{sendConversation:function(t){return e(ue("/dashboard/send",t,I))},getConversation:function(t){return e(te("/dashboard/myChat/"+t,I))}}}))((function(e){var t=e.getConversation,n=e.sendConversation,s=e.myChat,c=e.myUser,o=e.myID,i=Object(r.useRef)(null),l=Object(r.useState)(""),d=Object(Y.a)(l,2),u=d[0],j=d[1];return Object(r.useEffect)((function(){t(c._id)}),[t,c._id]),Object(r.useEffect)((function(){i.current.scroll(0,i.current.scrollHeight)})),Object(a.jsxs)("div",{className:de.a.container,style:{width:"100%",textAlign:"center"},children:[Object(a.jsx)("div",{ref:i,className:de.a.holder,children:s.messages?s.messages.map((function(e){return Object(a.jsxs)("div",{className:de.a.box,style:e.from===o?{marginRight:"auto",marginLeft:0}:{},children:[Object(a.jsx)("p",{style:{paddingBottom:"5px",borderBottom:"1px solid black"},children:e.name}),Object(a.jsx)("p",{children:e.content}),Object(a.jsx)("p",{className:de.a.date,children:new Date(e.date).toLocaleString()})]})})):"Loading..."}),Object(a.jsx)("textarea",{value:u,style:{width:"50%",margin:"0 auto",borderRadius:"15px",resize:"none"},onChange:function(e){j(e.target.value)}}),Object(a.jsx)("button",{className:de.a.button,onClick:function(e){n({id:c._id,avatar:c.avatar,name:c.name,theMessage:u}),j("")},children:"Send"})]})})),be=n(20),he=n.n(be);var pe=function(e){var t=e.user,n=e.admin;return console.log("Profile",t),Object(a.jsxs)("div",{className:n?"":he.a.container,children:[Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(a.jsx)("img",{style:{borderRadius:"50%",width:"25%"},src:"https://www.gravatar.com/avatar/".concat(t.avatar,"?s=500"),alt:"profile "})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:he.a.box,children:[Object(a.jsx)("h2",{className:he.a.label,children:"your name:"}),Object(a.jsx)("h2",{children:t.name})]}),Object(a.jsxs)("div",{className:he.a.box,children:[Object(a.jsx)("h2",{className:he.a.label,children:"your Email:"}),Object(a.jsx)("h2",{children:t.email})]}),Object(a.jsxs)("div",{className:he.a.box,children:[Object(a.jsx)("h2",{className:he.a.label,children:"Date of Employment:"}),Object(a.jsx)("h2",{children:new Date(t.dateOfEmployment).toLocaleDateString()})]})]})]})},Oe=["profile","history","messages"];var xe=Object(d.b)((function(e){return{myUserInfo:e.myUserInfo}}),(function(e){return{getMyUser:function(t){return e(te("/dashboard/employee/"+t,A))}}}))((function(e){var t=e.myUserInfo,n=e.getMyUser,s=Object(J.g)().id,c=new URLSearchParams(Object(J.f)().search).get("active")||0,o=Object(r.useState)(+c),i=Object(Y.a)(o,2),l=i[0],d=i[1];return Object(r.useEffect)((function(){n(s)}),[s,n]),t?Object(a.jsxs)("div",{className:ce.a.container,children:[0===l?Object(a.jsx)(pe,{admin:!0,user:t.employee}):"",1===l?Object(a.jsx)(ie,{history:t.history||[]}):"",2===l?Object(a.jsx)(je,{myUser:t.employee}):"",Object(a.jsxs)("button",{onClick:function(){d(2!==l?l+1:0)},style:{width:"50%",height:"45px",margin:"10px"},children:["Go to ",Oe[l+1]||"profile"]})]}):""})),me=n(33),ge=n.n(me),fe=["Sunday","Monday","Tuesday","Wendsday","Thrusday","Friday","Saturday"];var ve=Object(d.b)((function(e){return{registeredUsers:e.registeredUsers}}),(function(e){return{getRegisteredUsers:function(t){return e(te("/dashboard/registeredUsers/"+t,N))}}}))((function(e){var t=e.registeredUsers,n=e.getRegisteredUsers,s=(new Date).toJSON().split("T")[0],c=Object(r.useState)(s),o=Object(Y.a)(c,2),i=o[0],l=o[1];Object(r.useEffect)((function(){n(i)}),[n,i]);var d=function(e){var t=new Date(i);return new Date(t.setDate(t.getDate()-e)).toJSON().split("T")[0]};return Object(a.jsxs)("div",{className:ge.a.container,children:[Object(a.jsxs)("div",{style:{display:"inline-block",position:"relative"},children:[Object(a.jsx)("input",{max:s,onChange:function(e){l(e.target.value)},type:"Date",Value:i,className:ge.a.dateInput}),Object(a.jsx)("div",{style:{position:"absolute",display:"flex",alignItems:"center",right:"40px",bottom:"0",height:"30px"},children:fe[new Date(i).getDay()]})]}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"50%",margin:"0 auto"},children:[Object(a.jsx)("h3",{style:{cursor:"pointer",visibility:s===i?"hidden":"visible"},onClick:function(){l(d(-1))},children:"next day"}),Object(a.jsx)("h3",{style:{cursor:"pointer"},onClick:function(){l(d(1))},children:"previous day"})]}),t[0]?t.map((function(e){var t=new Date(e.AttendAt);return Object(a.jsxs)("div",{className:ge.a.box,children:[Object(a.jsx)("img",{style:{borderRadius:"50%",width:"80px",height:"80px"},src:"https://www.gravatar.com/avatar/".concat(e.avatar),alt:"profile "}),Object(a.jsx)("h2",{style:{textAlign:"center",width:"5em"},children:e.name}),Object(a.jsx)("h2",{children:Object(a.jsx)("span",{children:t.getHours()>12?t.getHours()-12+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+" PM":t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+" AM"})}),Object(a.jsxs)("h2",{children:[Object(a.jsx)("span",{children:t.getFullYear()}),Object(a.jsxs)("span",{children:["/",t.getMonth()+1]}),Object(a.jsxs)("span",{children:["/",t.getDate()]})]})]})})):Object(a.jsx)("h3",{style:{textAlign:"center ",margin:"auto"},children:"there is no Users registered on that day"})]})})),ye=n(34),_e=n.n(ye),we=["Sunday","Monday","Tuesday","Wendsday","Thrusday","Friday","Saturday"];var ke=Object(d.b)((function(e){return{allUsers:e.allUsers,registeredUsers:e.registeredUsers}}),(function(e){return{getAllUsers:function(){return e(te("/dashboard/allEmployees",k))},getRegisteredUsers:function(t){return e(te("/dashboard/registeredUsers/"+t,N))}}}))((function(e){var t=e.allUsers,n=e.getAllUsers,s=e.registeredUsers,c=e.getRegisteredUsers,o=(new Date).toJSON().split("T")[0],i=Object(r.useState)(o),l=Object(Y.a)(i,2),d=l[0],u=l[1],j=Object(r.useState)([]),b=Object(Y.a)(j,2),h=b[0],p=b[1];Object(r.useEffect)((function(){c(d)}),[c,d]),Object(r.useEffect)((function(){n()}),[n]);var O=function(e){var t=new Date(d);return new Date(t.setDate(t.getDate()-e)).toJSON().split("T")[0]};return Object(r.useEffect)((function(){var e=s.map((function(e){return e.user_id})),n=t.filter((function(t){return!e.includes(t._id)}));n=n.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})),p(n)}),[t,s]),Object(a.jsxs)("div",{className:_e.a.container,children:[Object(a.jsxs)("div",{style:{display:"inline-block",position:"relative"},children:[Object(a.jsx)("input",{max:o,onChange:function(e){u(e.target.value)},type:"Date",Value:d,className:_e.a.dateInput}),Object(a.jsx)("div",{style:{position:"absolute",display:"flex",alignItems:"center",right:"40px",bottom:"0",height:"30px"},children:we[new Date(d).getDay()]})]}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"50%",margin:"0 auto"},children:[Object(a.jsx)("h3",{style:{cursor:"pointer",visibility:o===d?"hidden":"visible"},onClick:function(){u(O(-1))},children:"next day"}),Object(a.jsx)("h3",{style:{cursor:"pointer"},onClick:function(){u(O(1))},children:"previous day"})]}),h[0]?h.map((function(e){return Object(a.jsxs)("div",{className:_e.a.box,children:[Object(a.jsx)("img",{style:{borderRadius:"50%",width:"80px",height:"80px"},src:"https://www.gravatar.com/avatar/".concat(e.avatar),alt:"profile "}),Object(a.jsx)("h2",{style:{textAlign:"center",width:"5em"},children:e.name})]})})):Object(a.jsx)("h3",{style:{textAlign:"center ",margin:"auto"},children:"there is no Users unRegistered on that day"})]})})),Ae=n(48),Ne=n.n(Ae);var Se=function(){var e=Object(d.c)(),t=Object(d.d)((function(e){return e.myInbox}));return Object(r.useEffect)((function(){e(te("/dashboard/getMyInbox",S))}),[e]),console.log("myInbox==>",t),Object(a.jsx)("div",{className:Ne.a.container,children:t[0]?t.map((function(e){var t=new Date(e.lastUpdatedAt);return Object(a.jsxs)(i.b,{to:"/dashboard/employee/".concat(e.userOne),className:Ne.a.box,children:[Object(a.jsx)("img",{style:{borderRadius:"50%",width:"80px",height:"80px"},src:"https://www.gravatar.com/avatar/".concat(e.avatar),alt:"profile "}),Object(a.jsx)("h2",{style:{textAlign:"center",width:"5em"},children:e.userName}),Object(a.jsx)("h2",{children:Object(a.jsx)("span",{children:t.getHours()>12?t.getHours()-12+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+" PM":t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+" AM"})}),Object(a.jsxs)("h2",{children:[Object(a.jsx)("span",{children:t.getFullYear()}),Object(a.jsxs)("span",{children:["/",t.getMonth()+1]}),Object(a.jsxs)("span",{children:["/",t.getDate()]})]})]})})):Object(a.jsx)("h3",{style:{textAlign:"center ",margin:"auto"},children:"there is no Users registered on that day"})})},Ie=function(e){Object(F.a)(n,e);var t=Object(P.a)(n);function n(){return Object(H.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(te("/dashboard/me",x))}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:W.a.container,children:[Object(a.jsx)(ee,{}),Object(a.jsxs)("div",{className:W.a.body,children:[Object(a.jsx)(X,{username:this.props.user.name,avatar:this.props.user.avatar}),Object(a.jsxs)(J.c,{children:[Object(a.jsx)(J.a,{exact:!0,path:"/"}),Object(a.jsx)(J.a,{path:"/dashboard/allEmployees",children:Object(a.jsx)(re,{})}),Object(a.jsx)(J.a,{path:"/dashboard/employee/:id",children:Object(a.jsx)(xe,{})}),Object(a.jsx)(J.a,{path:"/dashboard/registeredUsers",children:Object(a.jsx)(ve,{})}),Object(a.jsx)(J.a,{path:"/dashboard/AbsentEmployees",children:Object(a.jsx)(ke,{})}),Object(a.jsx)(J.a,{path:"/dashboard/recievedRequests",children:Object(a.jsx)(Se,{})})]})]})]})}}]),n}(r.Component),Ee=Object(d.b)((function(e){return{user:e.user}}))(Ie);var Ue=function(){var e=Object(r.useState)((new Date).toLocaleTimeString()),t=Object(Y.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=setInterval((function(){a((new Date).toLocaleTimeString()),console.log("beb")}),1e3);return function(){clearInterval(e)}}),[]),n},De=n(49),Ce=n.n(De);var Me=Object(d.b)((function(e){return{Attendance:e.Attendance,user:e.user}}))((function(e){var t=new Date,n=(new Date).getTimezoneOffset(),s=null,c=e.dispatch;return Object(r.useEffect)((function(){console.log("hooooooooooo======>",e.Attendance),console.log("hooooooooooo======>",!!e.Attendance)}),[e.Attendance]),Object(r.useEffect)((function(){c(te("/user/register",m))}),[c,n]),e.Attendance&&(s=new Date(e.Attendance.AttendAt)),Object(a.jsx)("div",{className:Ce.a.container,children:e.Attendance?Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{style:{textAlign:"center"},children:"you already registered today"}),Object(a.jsxs)("div",{className:Ce.a.box,children:[Object(a.jsx)("img",{style:{borderRadius:"50%"},src:"https://www.gravatar.com/avatar/".concat(e.user.avatar),alt:"profile "}),Object(a.jsx)("h2",{style:{textAlign:"center"},children:e.Attendance.name}),Object(a.jsx)("h2",{children:Object(a.jsx)("span",{children:s.getHours()>12?s.getHours()-12+":"+s.getMinutes()+" PM":s.getHours()+":"+s.getMinutes()+" AM"})}),Object(a.jsxs)("h2",{children:[Object(a.jsx)("span",{children:s.getFullYear()}),Object(a.jsxs)("span",{children:["/",s.getMonth()+1]}),Object(a.jsxs)("span",{children:["/",s.getDate()]})]})]})]}):Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)("h1",{style:{textAlign:"center"},children:Object(a.jsx)(Ue,{})}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:"1 0 0"},children:Object(a.jsx)("button",{onClick:function(){e.dispatch(ue("/user/register",{date:n,hours:t.getHours(),minutes:t.getMinutes()},m))},style:{width:"50%",margin:0},children:"Regiester"})})]})})})),Re=n(50),Te=n.n(Re);var Le=Object(d.b)((function(e){return{Attendance:e.Attendance,user:e.user}}))((function(e){var t,n=new Date,s=(new Date).getTimezoneOffset(),c=null,o=e.dispatch;return Object(r.useEffect)((function(){console.log("hooooooooooo======>",e.Attendance),console.log("hooooooooooo======>",!!e.Attendance)}),[e.Attendance]),Object(r.useEffect)((function(){o(te("/user/registerOut",m))}),[o]),e.Attendance&&(c=new Date(e.Attendance.LeftAt)),Object(a.jsx)("div",{className:Te.a.container,children:(null===(t=e.Attendance)||void 0===t?void 0:t.LeftAt)?Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{style:{textAlign:"center"},children:"you already registered out today"}),Object(a.jsxs)("div",{className:Te.a.box,children:[Object(a.jsx)("img",{style:{borderRadius:"50%"},src:"https://www.gravatar.com/avatar/".concat(e.user.avatar),alt:"profile "}),Object(a.jsx)("h2",{style:{textAlign:"center"},children:e.Attendance.name}),Object(a.jsx)("h2",{children:Object(a.jsx)("span",{children:c.getHours()>12?c.getHours()-12+":"+c.getMinutes()+" PM":c.getHours()+":"+c.getMinutes()+" AM"})}),Object(a.jsxs)("h2",{children:[Object(a.jsx)("span",{children:c.getFullYear()}),Object(a.jsxs)("span",{children:["/",c.getMonth()+1]}),Object(a.jsxs)("span",{children:["/",c.getDate()]})]})]})]}):Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)("h1",{style:{textAlign:"center"},children:Object(a.jsx)(Ue,{})}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:"1 0 0"},children:Object(a.jsx)("button",{onClick:function(){e.dispatch(ue("/user/registerOut",{date:s,hours:n.getHours(),minutes:n.getMinutes()},m))},style:{width:"50%",margin:0},children:"Regiester"})})]})})})),He=n(72),Be=n.n(He);var Fe=Object(d.b)((function(e){return{history:e.history}}))((function(e){var t=e.dispatch;return Object(r.useEffect)((function(){t(te("/user/allrecords",y))}),[t]),e.history[0]?Object(a.jsx)("div",{className:Be.a.container,children:Object(a.jsx)(ie,{history:e.history})}):Object(a.jsx)("h1",{children:"you have no history"})})),Pe=n(25),Je=n.n(Pe);var ze=Object(d.b)((function(e){return{conversation:e.conversation,myID:e.user._id}}),(function(e){return{sendConversation:function(t){return e(ue("/conversation/send",t,_))},getConversation:function(t){return e(te("/conversation",_))}}}))((function(e){var t=e.getConversation,n=e.sendConversation,s=e.conversation,c=e.myID,o=Object(r.useRef)(null),i=Object(r.useState)(""),l=Object(Y.a)(i,2),d=l[0],u=l[1];return Object(r.useEffect)((function(){t()}),[t]),Object(r.useEffect)((function(){o.current.scroll(0,o.current.scrollHeight)})),Object(a.jsxs)("div",{className:Je.a.container,children:[Object(a.jsx)("div",{ref:o,className:Je.a.holder,children:s.messages?s.messages.map((function(e){return Object(a.jsxs)("div",{className:Je.a.box,style:e.from===c?{marginRight:"auto",marginLeft:0}:{},children:[Object(a.jsx)("p",{style:{paddingBottom:"5px",borderBottom:"1px solid black"},children:e.name}),Object(a.jsx)("p",{children:e.content}),Object(a.jsx)("p",{className:Je.a.date,children:new Date(e.date).toLocaleString()})]})})):"haha"}),Object(a.jsx)("textarea",{value:d,style:{width:"50%",margin:"0 auto",borderRadius:"15px",resize:"none"},onChange:function(e){u(e.target.value)}}),Object(a.jsx)("button",{className:Je.a.button,onClick:function(e){n({theMessage:d}),u("")},children:"Send"})]})})),We=n(51),Ye=n.n(We),qe=n(52),Ke=n.n(qe);var Ge=Object(d.b)((function(e){return{notification:e.notification}}))((function(e){var t=e.notification,n=e.dispatch;return console.log("notification",t),Object(r.useEffect)((function(){n(te("/user/getNotification",w))}),[n]),Object(a.jsx)("div",{className:Ke.a.container,children:t?t.map((function(e,t){return Object(a.jsxs)("div",{className:Ke.a.box,children:[Object(a.jsx)("span",{children:e.msg}),Object(a.jsx)("span",{children:new Date(e.date).toLocaleString()})]},t)})):""})})),Ve=n(53),Qe=n.n(Ve),Xe=n(54),Ze=n.n(Xe);var $e=function(e){return Object(a.jsx)("li",{className:Ze.a.sidebar_item,onClick:function(){e.setActive(e.path)},style:e.theActiveItem===e.path?{backgroundColor:"red"}:{},children:Object(a.jsx)(i.b,{className:Ze.a.Link,to:e.path,children:e.name})})};var et=function(e){var t=e.username,n=e.avatar,s=Object(r.useState)("/"),c=Object(Y.a)(s,2),o=c[0],i=c[1];return console.log("activeItem==>",o),Object(a.jsxs)("div",{className:Qe.a.container,children:[Object(a.jsxs)("div",{style:{textAlign:"center"},children:[Object(a.jsx)("img",{style:{borderRadius:"50%"},src:"https://www.gravatar.com/avatar/".concat(n),alt:"profile "}),Object(a.jsx)("h2",{style:{textAlign:"center"},children:t})]}),Object(a.jsxs)("ul",{className:Qe.a.sidebar_list,children:[Object(a.jsx)($e,{name:"Home",path:"/",setActive:i,theActiveItem:o}),Object(a.jsx)($e,{name:"My Profile",path:"/myprofile",setActive:i,theActiveItem:o}),Object(a.jsx)($e,{name:"My History",path:"/myhistory",setActive:i,theActiveItem:o}),Object(a.jsx)($e,{name:"Attendance registration",path:"/Register",setActive:i,theActiveItem:o}),Object(a.jsx)($e,{name:"Leave",path:"/leave",setActive:i,theActiveItem:o}),Object(a.jsx)($e,{name:"send",path:"/send",setActive:i,theActiveItem:o}),Object(a.jsx)($e,{name:"dashboard",path:"/dashboard",setActive:i,theActiveItem:o})]})]})},tt=function(e){Object(F.a)(n,e);var t=Object(P.a)(n);function n(){return Object(H.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(te("/user/me",x))}},{key:"render",value:function(){return Object(a.jsx)(r.Fragment,{children:Object(a.jsxs)(J.c,{children:[Object(a.jsx)(J.a,{path:"/dashboard",children:Object(a.jsx)(Ee,{})}),Object(a.jsx)(J.a,{path:"/",children:Object(a.jsxs)("div",{className:Ye.a.container,children:[Object(a.jsx)(ee,{}),Object(a.jsxs)("div",{className:Ye.a.body,children:[Object(a.jsx)(et,{username:this.props.user.name,avatar:this.props.user.avatar}),Object(a.jsx)(J.a,{exact:!0,path:"/",children:Object(a.jsx)(Ge,{notification:this.props.user.notification})}),Object(a.jsx)(J.a,{path:"/myprofile",children:Object(a.jsx)(pe,{user:this.props.user})}),Object(a.jsx)(J.a,{path:"/myhistory",children:Object(a.jsx)(Fe,{})}),Object(a.jsx)(J.a,{path:"/Register",children:Object(a.jsx)(Me,{})}),Object(a.jsx)(J.a,{path:"/leave",children:Object(a.jsx)(Le,{})}),Object(a.jsx)(J.a,{path:"/send",children:Object(a.jsx)(ze,{})})]})]})})]})})}}]),n}(r.Component),nt=Object(d.b)((function(e){return{user:e.user}}))(tt),at=n(23),rt=n(21),st=n.n(rt),ct=n(73),ot=n.n(ct),it=n(29),lt=n.n(it),dt=n(74),ut=n.n(dt);var jt=function(e){var t=e.name,n=e.onSubmit;return Object(a.jsx)("button",{className:ut.a.button,onClick:n,children:t})};var bt=function(e){var t=this,n=e.title,r=e.items,s=e.onSubmit;return Object(a.jsx)("div",{className:lt.a.container,children:Object(a.jsxs)("form",{onSubmit:s,children:[Object(a.jsxs)("h1",{className:lt.a.title,children:[n," "]}),r.map((function(e,n){return Object(a.jsxs)("div",{className:lt.a.formgroup,children:[Object(a.jsxs)("label",{htmlFor:e.name,children:[e.name,":"]}),Object(a.jsx)("input",{value:e.value,style:e.error?{border:"2px solid red"}:{},minLength:"password"===e.type?"8":"",required:!0,onChange:e.saveInputData.bind(t,e.type),className:lt.a.input,type:0===e.type.search(/pass/)?"password":e.type,placeholder:e.placeholder})]},n)})),Object(a.jsx)(jt,{name:n})]})})};var ht=Object(d.b)((function(e){return{token:e.token}}))((function(e){var t=Object(r.useState)({email:"",password:""}),n=Object(Y.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)({}),l=Object(Y.a)(o,2),d=l[0],u=l[1],b=function(t,n){console.log("props==>",e);var a=n.target.value,r=Object.assign(d,function(e,t){var n={};switch(e){case"email":st.a.isEmail(t)?n.email="":n.email="invalid Email",""===t&&(n.email="");break;case"password":st.a.isLength(t,{min:8})?n.password="":n.password="invalid password",""===t&&(n.password="")}return n}(t,a));u(r);var o=Object.assign(s,Object(at.a)({},t,a));c(Object(j.a)({},o))},p=function(){var t=Object(D.a)(U.a.mark((function t(n){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),!Object.values(d).join("")&&e.dispatch(ue("/login",{email:s.email,password:s.password},h));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:ot.a.container,children:[Object(a.jsx)("h1",{style:{textAlign:"right",margin:0,padding:"15px"},children:Object(a.jsx)(i.b,{to:"/signup",children:"Sign Up"})}),Object(a.jsx)(bt,{title:"Login",items:[{name:"Email",type:"email",placeholder:"your Email address",saveInputData:b,error:d.email,value:s.email},{name:"Password",type:"password",placeholder:"your password",saveInputData:b,error:d.password,value:s.password}],onSubmit:p})]})})),pt=n(75),Ot=n.n(pt);var xt=Object(d.b)(null)((function(e){var t=Object(r.useState)({username:"",email:"",password:"",password2:""}),n=Object(Y.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)({}),l=Object(Y.a)(o,2),d=l[0],u=l[1],b=function(t,n){console.log(e);var a=n.target.value,r=Object.assign(d,function(e,t){var n={};switch(e){case"userName":st.a.isLength(t,{min:3})?n.username="":n.username="invalid username",""===t&&(n.username="");break;case"email":st.a.isEmail(t)?n.email="":n.email="invalid Email",""===t&&(n.email="");break;case"password":st.a.isLength(t,{min:8})?n.password="":n.password="invalid password",""===t&&(n.password="");break;case"password2":t===s.password?n.password2="":n.password2="password not match",""===t&&(n.password2="")}return n}(t,a));u(r);var o=Object.assign(s,Object(at.a)({},t,a));c(Object(j.a)({},o))};return Object(a.jsxs)("div",{className:Ot.a.container,children:[Object(a.jsx)("h1",{style:{textAlign:"right",margin:0,padding:"15px"},children:Object(a.jsx)(i.b,{to:"/login",children:"log  In"})}),Object(a.jsx)(bt,{title:"Sign Up",items:[{name:"username",type:"username",value:s.username,placeholder:"your user name",error:d.username,saveInputData:b},{name:"Email",type:"email",value:s.email,placeholder:"your Email address",saveInputData:b,error:d.email},{name:"Password",type:"password",value:s.password,placeholder:"your password",saveInputData:b,error:d.password},{name:"confirm Password",type:"password2",value:s.password2,placeholder:"write password again",saveInputData:b,error:d.password2}],onSubmit:function(t){t.preventDefault();var n=!Object.values(d).join("");n&&(n&&(console.log("ok",n),e.dispatch(ue("/signup",s))),console.log("dddddd===>",s))}})]})})),mt=n(76),gt=n.n(mt);function ft(e){return Object(a.jsx)("div",{className:gt.a.container,style:e.show?{display:"flex"}:{display:"none"}})}var vt=Object(r.memo)(ft),yt=n(77),_t=n.n(yt),wt=n(78),kt=n.n(wt);function At(){return Object(a.jsx)("div",{className:kt.a.loader})}function Nt(e){return Object(a.jsxs)("div",{style:{top:e.show?"40%":"-100%"},className:_t.a.container,children:[e.loading?Object(a.jsx)(At,{}):"",e.errors?Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{style:{margin:0,paddingLeft:"5px"},children:[" ",e.errors.msg]}),Object(a.jsx)("button",{style:{padding:"5px"},onClick:e.hide,children:"Cancel"})]}):""]})}var St=Object(r.memo)(Nt),It=(n(168),function(e){Object(F.a)(n,e);var t=Object(P.a)(n);function n(){var e;Object(H.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).Components=[],e}return Object(B.a)(n,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");e&&this.props.set_token(e)}},{key:"render",value:function(){return this.props.token?this.Components=[Object(a.jsx)(J.a,{ket:1,path:"/",children:Object(a.jsx)(nt,{})})]:this.Components=[Object(a.jsx)(J.a,{path:"/",render:function(e){return Object(a.jsx)(ht,Object(j.a)({},e))}},1),Object(a.jsx)(J.a,{path:"/signup",render:function(e){return Object(a.jsx)(xt,Object(j.a)({},e))}},2),Object(a.jsx)(J.a,{path:"/",children:Object(a.jsx)(i.b,{to:"/login",children:"Log in"})},3)],Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(vt,{show:this.props.showBackdrop}),Object(a.jsx)(St,{errors:this.props.errors,loading:this.props.loading,hide:this.props.hideBackdrop,show:this.props.showBackdrop,content:"it is working"}),Object(a.jsx)(J.c,{children:this.Components.map((function(e){return e}))})]})}}]),n}(r.Component)),Et=Object(d.b)((function(e){return{token:e.token,showBackdrop:e.backdrop,loading:e.loading,errors:e.errors}}),(function(e){return{set_token:function(t){return e({type:b,payload:t})},hideBackdrop:function(){e({type:f})}}}))(It),Ut=function(e){Object(F.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(H.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(B.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("error",e,t)}},{key:"render",value:function(){return this.state.hasError?Object(a.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(s.a.Component),Dt=(n(169),Object(l.c)(L,Object(l.a)(u.a)));o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(Ut,{children:Object(a.jsx)(d.a,{store:Dt,children:Object(a.jsx)(i.a,{children:Object(a.jsx)(Et,{})})})})}),document.getElementById("root"))},20:function(e,t,n){e.exports={container:"profile_container__3quN1",box:"profile_box__3XwLB",label:"profile_label__12Nuh"}},24:function(e,t,n){e.exports={box:"textUser_box__2oCZi",date:"textUser_date__1dhGo",button:"textUser_button__bkzIB",holder:"textUser_holder__1q6c3"}},25:function(e,t,n){e.exports={container:"send_container__24fnt",box:"send_box__3DxN7",date:"send_date__2wfR3",button:"send_button__3igh_",holder:"send_holder__1A_ST"}},29:function(e,t,n){e.exports={container:"form_container__1m_aK",title:"form_title__1kUvm",input:"form_input__2AV46",formgroup:"form_formgroup__3CORH"}},33:function(e,t,n){e.exports={container:"registeredUsers_container__1wwWb",dateInput:"registeredUsers_dateInput__3zqaK",box:"registeredUsers_box__1SbmM"}},34:function(e,t,n){e.exports={container:"UnRegisterUsers_container__2DMKM",dateInput:"UnRegisterUsers_dateInput__1_wmp",box:"UnRegisterUsers_box__2RJRJ"}},41:function(e,t,n){e.exports={container:"home_container__28s_W",body:"home_body__36C1i"}},42:function(e,t,n){e.exports={container:"sidebar_container__3hvz5",sidebar_list:"sidebar_sidebar_list__1tEgr"}},43:function(e,t,n){e.exports={sidebar_item:"sidebarItem_sidebar_item__3-4U-",Link:"sidebarItem_Link__Hg5Pv"}},46:function(e,t,n){e.exports={nav:"nav_nav__qNVVd",nav_list:"nav_nav_list__3dbRK"}},47:function(e,t,n){e.exports={box:"allUsers_box__2FJbu",dd:"allUsers_dd__212ug"}},48:function(e,t,n){e.exports={container:"MyInbox_container__1CbIz",box:"MyInbox_box__1KbS1"}},49:function(e,t,n){e.exports={container:"attend_container__2c9hR",box:"attend_box__3kzH3"}},50:function(e,t,n){e.exports={container:"logOut_container__2t6Ea",box:"logOut_box__Zkz0n"}},51:function(e,t,n){e.exports={container:"home_container__1Qb7C",body:"home_body__d3ABJ"}},52:function(e,t,n){e.exports={container:"Notification_container__3DFN5",box:"Notification_box__2OiR3"}},53:function(e,t,n){e.exports={container:"sidebar_container__1d-LQ",sidebar_list:"sidebar_sidebar_list__oPheb"}},54:function(e,t,n){e.exports={sidebar_item:"sidebarItem_sidebar_item__JJcqQ",Link:"sidebarItem_Link__1LJYw"}},71:function(e,t,n){e.exports={container:"getUser_container__3fhxj",box:"getUser_box__1CXRR",date:"getUser_date__1chwi",button:"getUser_button__1F-8l",holder:"getUser_holder__20soi"}},72:function(e,t,n){e.exports={container:"history_container__XgTLH"}},73:function(e,t,n){e.exports={container:"login_container__1Nts0"}},74:function(e,t,n){},75:function(e,t,n){e.exports={container:"signup_container__2xr-a"}},76:function(e,t,n){e.exports={container:"backdrop_container__2oBNM"}},77:function(e,t,n){e.exports={container:"model_container__3oMFL"}},78:function(e,t,n){e.exports={loader:"spinner_loader__34qJB",load6:"spinner_load6__1k50j",round:"spinner_round__26a7P"}}},[[170,1,2]]]);
//# sourceMappingURL=main.c9639331.chunk.js.map